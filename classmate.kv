ScreenManager:
    Login:
        name: 'login'
    Grades:
        name: 'grades'
    Absences:
        name: 'absences'
    Subject:
        name: 'subject'
<Login>
    untis_un: username.text
    untis_pw: pw.text
    login_btn: btn1
    GridLayout:
        cols: 1
        rows: 3
        size: root.width,root.height
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            size_hint_y: None
            height: root.height * 0.08
            padding: [10, 10]
            spacing: 10
            canvas.before:
                Color:
                    rgba: 0.894, 0.424, 0.008, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            Widget:
                size_hint_x: 1

            Image:
                source: 'assets/school-20.png' 
                size_hint: None, None
                width: root.width * 0.1
                height: root.height * 0.1
                pos_hint: {'center_y': 0.5}

            Widget:
                size_hint_x: 1
        
        GridLayout:
            cols: 1
            rows: 3
            spacing: 25
            padding: [root.width*0.075,root.height*0.1,0,0]
            size_hint: (None,None)
            width: root.width * 0.8
            height: root.height
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            
            TextInput:
                id: username
                hint_text: "Untis-Username"
                size_hint_y: None
                size_hint_x: None
                width: root.width * 0.85
                height: root.height * 0.055
                font_size: root.height * 0.025
                background_color: (1, 1, 1, 0.2)
                hint_text_color: (1, 1, 1, 1)
                foreground_color: (1, 1, 1, 1)
            TextInput:
                id: pw
                hint_text: "Untis-Passwort"
                password: True
                hint_text_color: (1, 1, 1, 1)
                size_hint_y: None
                size_hint_x: None
                width: root.width * 0.85
                font_size: root.height * 0.025
                height: root.height * 0.055
                background_color: (1, 1, 1, 0.2)
                foreground_color: (1, 1, 1, 1)
            Button:
                id: btn1
                text: "Login"
                size_hint_y: None
                size_hint_x: None
                font_size: root.height * 0.03
                width: root.width * 0.85
                height: root.height * 0.065
                background_color: 0.894, 0.424, 0.008, 1
                background_normal: ""
                on_press:
                    root.login()

<grades>:
    GridLayout:
        cols: 1
        rows: 3
        size: root.width,root.height
        canvas.before:
            Color:
                rgba: 0.0627, 0.0588, 0.0588, 0.86
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            size_hint_y: None
            height: root.height * 0.08
            padding: [10, 10]
            spacing: 10
            canvas.before:
                Color:
                    rgba: 0.894, 0.424, 0.008, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
           

            Button:
                id: btn2
                size_hint_y: None
                size_hint_x: None
                width: root.height * 0.05
                height: root.height * 0.05
                background_color: (0, 0, 0, 0)
                pos_hint: {'center_y': 0.5}
                canvas.before:
                    Rectangle:
                        source: 'assets/dabsence.png'
                        size: self.width - 10, self.height - 10
                        pos: self.x, self.y + 1.5
                on_press: root.to_absences()
            Widget:
                size_hint_x: 1

            Image:
                source: 'assets/school-20.png' 
                size_hint: None, None
                width: root.height * 0.1
                height: root.width * 0.1
                pos_hint: {'center_y': 0.5}
            
            Widget:
                size_hint_x: 1

            Button:
                id: btn2
                size_hint_y: None
                size_hint_x: None
                width: root.width * 0.1
                height: root.width * 0.1
                background_color: (0, 0, 0, 0)
                pos_hint: {'center_y': 0.5}
                canvas.before:
                    Rectangle:
                        source: 'assets/logout1.png'
                        size: self.width - 10, self.height - 10
                        pos: self.x, self.y + 1.5
                on_press: root.logout()

        GridLayout:
            cols: 1
            spacing: root.height * 0.06
            size_hint: (None,None)
            width: root.width
            height: root.height * 0.2
            canvas.before:
                Color:
                    rgba: 0.0627, 0.0588, 0.0588, 0.86
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: root.overall_average
                padding: [0,root.height * 0.1,0,0]
                font_size: root.height * 0.06
                color : root.oa_color
                size_hint_y: None
                size_hint_x: None
                width: root.width
                height: root.height * 0.065  
                halign: 'center'           
            Label:
                text: root.ratio
                color: root.oa_color
                font_size: root.height * 0.02
                markup: True
                size_hint_x: None
                size_hint_y: None
                width: root.width
                height: root.height * 0.03
                halign: 'center'

        ScrollView:
            canvas.before:
                Color:
                    rgba: 0.0627, 0.0588, 0.0588, 0.86
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint: 1, None
            height: root.height * 0.65
            width: root.width * 0.8
            padding: [0,root.height*0.35,0,0]

            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.0627, 0.0588, 0.0588, 0.86
                    Rectangle:
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                size_hint_y: None
                width: root.width * 0.8
                height: self.minimum_height
                spacing: root.height * 0.015
                id: dynamic_subjects


<subject>:
    GridLayout:
        cols: 1
        rows: 3
        size: root.width,root.height
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            size_hint_y: None
            height: root.height * 0.08
            padding: [10, 10]
            spacing: 10
            canvas.before:
                Color:
                    rgba: 0.894, 0.424, 0.008, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
           

            Button:
                id: btn2
                size_hint_y: None
                size_hint_x: None
                width: root.height * 0.05
                height: root.height * 0.05
                background_color: (0, 0, 0, 0)
                pos_hint: {'center_y': 0.5}
                canvas.before:
                    Rectangle:
                        source: 'assets/arrowb.png'
                        size: self.width - 10, self.height - 10
                        pos: self.x + 5, self.y + 1.5
                on_press: root.to_grades()

            Widget:
                size_hint_x: 1

            Image:
                source: 'assets/school-20.png' 
                size_hint: None, None
                width: root.height * 0.1
                height: root.width * 0.1
                pos_hint: {'center_y': 0.5}
                
            
            Widget:
                size_hint_x: 1

            Button:
                id: btn2
                size_hint_y: None
                size_hint_x: None
                width: root.width * 0.1
                height: root.width * 0.1
                background_color: (0, 0, 0, 0)
                pos_hint: {'center_y': 0.5}
                canvas.before:
                    Rectangle:
                        source: 'assets/logout1.png'
                        size: self.width - 10, self.height - 10
                        pos: self.x, self.y + 1.5
                on_press: root.logout()

        GridLayout:
            cols: 1
            spacing: 2
            padding: [0,20,0,0]
            size_hint: (None,None)
            width: root.width
            height: 220
            Label:
                text: root.subject
                font_size: root.height * 0.05
                color: [1, 1, 1, 1]
                size_hint_y: None
                size_hint_x: None
                width: root.width
                height: root.height * 0.055
                halign: 'center'  
            Label:
                text: root.main_mark
                font_size: root.height * 0.035
                color: root.oa_color
                size_hint_y: None
                size_hint_x: None
                width: root.width
                height: root.height * 0.05
                halign: 'center'  

            ScrollView:
                size_hint: 1, None
                height: root.height * 0.75
                padding: [0,root.height * 0.3,0,0]

                BoxLayout:
                    orientation: 'vertical'
                    halign: 'left'
                    size_hint_y: None
                    height: self.minimum_height
                    padding: 8
                    spacing: 12
                    id: dynamic_exams    

<absences>:
    GridLayout:
        cols: 1
        rows: 3
        size: root.width,root.height
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            size_hint_y: None
            height: root.height * 0.08
            padding: [10, 10]
            spacing: 10
            canvas.before:
                Color:
                    rgba: 0.894, 0.424, 0.008, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
           

            Button:
                id: btn2
                size_hint_y: None
                size_hint_x: None
                width: root.height * 0.05
                height: root.height * 0.05
                background_color: (0, 0, 0, 0)
                pos_hint: {'center_y': 0.5}
                canvas.before:
                    Rectangle:
                        source: 'assets/arrowb.png'
                        size: self.width - 10, self.height - 10
                        pos: self.x + 5, self.y + 1.5
                on_press: root.to_grades()

            Widget:
                size_hint_x: 1

            Image:
                source: 'assets/school-20.png' 
                size_hint: None, None
                width: root.height * 0.1
                height: root.width * 0.1
                pos_hint: {'center_y': 0.5}
                
            
            Widget:
                size_hint_x: 1

            Button:
                id: btn2
                size_hint_y: None
                size_hint_x: None
                width:  root.width * 0.1
                height:  root.width * 0.1
                background_color: (0, 0, 0, 0)
                pos_hint: {'center_y': 0.5}
                canvas.before:
                    Rectangle:
                        source: 'assets/logout1.png'
                        size: self.width - 10, self.height - 10
                        pos: self.x, self.y + 1.5
                on_press: root.logout()

        GridLayout:
            cols: 1
            spacing: 2
            padding: [0,20,0,0]
            size_hint: (None,None)
            width: root.width
            height: 220
            Label:
                text: root.overall_absences
                font_size: root.height * 0.05
                markup: True
                size_hint_y: None
                color: 0,0,0,1
                size_hint_x: None
                width: root.width
                height: root.height * 0.07    
                halign: 'center' 
            Label:
                text: ""
                font_size: root.height * 0.03
                markup: True
                size_hint_y: None
                color: 1,1,1,1
                size_hint_x: None
                width: root.width
                height: root.height * 0.05  
                halign: 'center' 
            
            ScrollView:
                size_hint: 1, None
                height: root.height * 0.75

                BoxLayout:
                    orientation: 'vertical'
                    halign: 'left'
                    size_hint_y: None
                    height: self.minimum_height
                    padding: 8
                    spacing: 12
                    id: dynamic_absences       
